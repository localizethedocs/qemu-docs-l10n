# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2025, The QEMU Project Developers
# This file is distributed under the same license as the QEMU package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: QEMU master\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-11-03 08:39+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: zh_TW\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../specs/ppc-spapr-xive.rst:2
msgid "XIVE for sPAPR (pseries machines)"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:4
msgid ""
"The POWER9 processor comes with a new interrupt controller architecture, "
"called XIVE as \"eXternal Interrupt Virtualization Engine\". It supports a "
"larger number of interrupt sources and offers virtualization features which "
"enables the HW to deliver interrupts directly to virtual processors without "
"hypervisor assistance."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:10
msgid ""
"A QEMU ``pseries`` machine (which is PAPR compliant) using POWER9 processors "
"can run under two interrupt modes:"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:13
msgid "*Legacy Compatibility Mode*"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:15
msgid ""
"the hypervisor provides identical interfaces and similar functionality to "
"PAPR+ Version 2.7.  This is the default mode"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:18
msgid "It is also referred as *XICS* in QEMU."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:20
msgid "*XIVE native exploitation mode*"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:22
msgid ""
"the hypervisor provides new interfaces to manage the XIVE control "
"structures, and provides direct control for interrupt management through "
"MMIO pages."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:26
msgid ""
"Which interrupt modes can be used by the machine is negotiated with the "
"guest O/S during the Client Architecture Support negotiation sequence. The "
"two modes are mutually exclusive."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:30
msgid ""
"Both interrupt mode share the same IRQ number space. See below for the "
"layout."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:34
msgid "CAS Negotiation"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:36
msgid ""
"QEMU advertises the supported interrupt modes in the device tree property "
"``ibm,arch-vec-5-platform-support`` in byte 23 and the OS Selection for XIVE "
"is indicated in the ``ibm,architecture-vec-5`` property byte 23."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:41
msgid ""
"The interrupt modes supported by the machine depend on the CPU type (POWER9 "
"is required for XIVE) but also on the machine property ``ic-mode`` which can "
"be set on the command line. It can take the following values: ``xics``, "
"``xive``, and ``dual`` which is the default mode. ``dual`` means that both "
"modes XICS **and** XIVE are supported and if the guest OS supports XIVE, "
"this mode will be selected."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:49
msgid ""
"The chosen interrupt mode is activated after a reconfiguration done in a "
"machine reset."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:53
msgid "KVM negotiation"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:55
msgid ""
"When the guest starts under KVM, the capabilities of the host kernel and "
"QEMU are also negotiated. Depending on the version of the host kernel, KVM "
"will advertise the XIVE capability to QEMU or not."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:59
msgid ""
"Nevertheless, the available interrupt modes in the machine should not depend "
"on the XIVE KVM capability of the host. On older kernels without XIVE KVM "
"support, QEMU will use the emulated XIVE device as a fallback and on newer "
"kernels (>=5.2), the KVM XIVE device."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:64
msgid ""
"XIVE native exploitation mode is not supported for KVM nested guests, VMs "
"running under a L1 hypervisor (KVM on pSeries). In that case, the hypervisor "
"will not advertise the KVM capability and QEMU will use the emulated XIVE "
"device, same as for older versions of KVM."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:69
msgid ""
"As a final refinement, the user can also switch the use of the KVM device "
"with the machine option ``kernel_irqchip``."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:74
msgid "XIVE support in KVM"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:76
msgid ""
"For guest OSes supporting XIVE, the resulting interrupt modes on host "
"kernels with XIVE KVM support are the following:"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:80 ../../../specs/ppc-spapr-xive.rst:94
#: ../../../specs/ppc-spapr-xive.rst:116 ../../../specs/ppc-spapr-xive.rst:140
msgid "ic-mode"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:80 ../../../specs/ppc-spapr-xive.rst:94
#: ../../../specs/ppc-spapr-xive.rst:116 ../../../specs/ppc-spapr-xive.rst:140
msgid "kernel_irqchip"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:82 ../../../specs/ppc-spapr-xive.rst:96
#: ../../../specs/ppc-spapr-xive.rst:118 ../../../specs/ppc-spapr-xive.rst:142
msgid "/"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:82 ../../../specs/ppc-spapr-xive.rst:96
#: ../../../specs/ppc-spapr-xive.rst:118 ../../../specs/ppc-spapr-xive.rst:142
msgid "allowed (default)"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:82 ../../../specs/ppc-spapr-xive.rst:96
#: ../../../specs/ppc-spapr-xive.rst:118 ../../../specs/ppc-spapr-xive.rst:142
msgid "off"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:82 ../../../specs/ppc-spapr-xive.rst:96
#: ../../../specs/ppc-spapr-xive.rst:118 ../../../specs/ppc-spapr-xive.rst:142
msgid "on"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:85 ../../../specs/ppc-spapr-xive.rst:99
#: ../../../specs/ppc-spapr-xive.rst:121 ../../../specs/ppc-spapr-xive.rst:145
msgid "dual (default)"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:85 ../../../specs/ppc-spapr-xive.rst:86
msgid "XIVE KVM"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:85 ../../../specs/ppc-spapr-xive.rst:86
#: ../../../specs/ppc-spapr-xive.rst:121 ../../../specs/ppc-spapr-xive.rst:122
msgid "XIVE emul."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:86 ../../../specs/ppc-spapr-xive.rst:100
#: ../../../specs/ppc-spapr-xive.rst:122 ../../../specs/ppc-spapr-xive.rst:146
msgid "xive"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:87 ../../../specs/ppc-spapr-xive.rst:101
#: ../../../specs/ppc-spapr-xive.rst:123 ../../../specs/ppc-spapr-xive.rst:147
msgid "xics"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:87 ../../../specs/ppc-spapr-xive.rst:99
#: ../../../specs/ppc-spapr-xive.rst:101 ../../../specs/ppc-spapr-xive.rst:123
#: ../../../specs/ppc-spapr-xive.rst:147
msgid "XICS KVM"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:87 ../../../specs/ppc-spapr-xive.rst:99
#: ../../../specs/ppc-spapr-xive.rst:101 ../../../specs/ppc-spapr-xive.rst:123
#: ../../../specs/ppc-spapr-xive.rst:145 ../../../specs/ppc-spapr-xive.rst:147
msgid "XICS emul."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:90 ../../../specs/ppc-spapr-xive.rst:136
msgid ""
"For legacy guest OSes without XIVE support, the resulting interrupt modes "
"are the following:"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:100 ../../../specs/ppc-spapr-xive.rst:146
msgid "QEMU error(3)"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:104 ../../../specs/ppc-spapr-xive.rst:150
msgid ""
"QEMU fails at CAS with ``Guest requested unavailable interrupt mode (XICS), "
"either don't set the ic-mode machine property or try ic-mode=xics or ic-"
"mode=dual``"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:110
msgid "No XIVE support in KVM"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:112
msgid ""
"For guest OSes supporting XIVE, the resulting interrupt modes on host "
"kernels without XIVE KVM support are the following:"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:121 ../../../specs/ppc-spapr-xive.rst:122
msgid "XIVE emul.(1)"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:121 ../../../specs/ppc-spapr-xive.rst:122
msgid "QEMU error (2)"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:127
msgid ""
"QEMU warns with ``warning: kernel_irqchip requested but unavailable: "
"IRQ_XIVE capability must be present for KVM`` In some cases (old host "
"kernels or KVM nested guests), one may hit a QEMU/KVM incompatibility due to "
"device destruction in reset. QEMU fails with ``KVM is incompatible with ic-"
"mode=dual,kernel-irqchip=on``"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:132
msgid ""
"QEMU fails with ``kernel_irqchip requested but unavailable: IRQ_XIVE "
"capability must be present for KVM``"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:145
msgid "QEMU error(4)"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:153
msgid ""
"QEMU/KVM incompatibility due to device destruction in reset. QEMU fails with "
"``KVM is incompatible with ic-mode=dual,kernel-irqchip=on``"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:158
msgid "XIVE Device tree properties"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:160
msgid ""
"The properties for the PAPR interrupt controller node when the *XIVE native "
"exploitation mode* is selected should contain:"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:163
msgid "``device_type``"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:165
msgid "value should be \"power-ivpe\"."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:167
msgid "``compatible``"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:169
msgid "value should be \"ibm,power-ivpe\"."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:171
msgid "``reg``"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:173
msgid ""
"contains the base address and size of the thread interrupt managnement areas "
"(TIMA), for the User level and for the Guest OS level. Only the Guest OS "
"level is taken into account today."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:177
msgid "``ibm,xive-eq-sizes``"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:179
msgid ""
"the size of the event queues. One cell per size supported, contains log2 of "
"size, in ascending order."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:182
msgid "``ibm,xive-lisn-ranges``"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:184
msgid "the IRQ interrupt number ranges assigned to the guest for the IPIs."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:186
msgid "The root node also exports :"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:188
msgid "``ibm,plat-res-int-priorities``"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:190
msgid ""
"contains a list of priorities that the hypervisor has reserved for its own "
"use."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:194
msgid "IRQ number space"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:196
msgid ""
"IRQ Number space of the ``pseries`` machine is 8K wide and is the same for "
"both interrupt mode. The different ranges are defined as follow :"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:199
msgid "``0x0000 .. 0x0FFF`` 4K CPU IPIs (only used under XIVE)"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:200
msgid "``0x1000 .. 0x1000`` 1 EPOW"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:201
msgid "``0x1001 .. 0x1001`` 1 HOTPLUG"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:202
msgid "``0x1002 .. 0x10FF`` unused"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:203
msgid "``0x1100 .. 0x11FF`` 256 VIO devices"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:204
msgid "``0x1200 .. 0x127F`` 32x4 LSIs for PHB devices"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:205
msgid "``0x1280 .. 0x12FF`` unused"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:206
msgid "``0x1300 .. 0x1FFF`` PHB MSIs (dynamically allocated)"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:209
msgid "Monitoring XIVE"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:211
msgid ""
"The state of the XIVE interrupt controller can be queried through the "
"monitor commands ``info pic``. The output comes in two parts."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:214
msgid ""
"First, the state of the thread interrupt context registers is dumped for "
"each CPU :"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:219
msgid ""
"(qemu) info pic\n"
"CPU[0000]:   QW   NSR CPPR IPB LSMFB ACK# INC AGE PIPR  W2\n"
"CPU[0000]: USER    00   00  00    00   00  00  00   00  00000000\n"
"CPU[0000]:   OS    00   ff  00    00   ff  00  ff   ff  80000400\n"
"CPU[0000]: POOL    00   00  00    00   00  00  00   00  00000000\n"
"CPU[0000]: PHYS    00   00  00    00   00  00  00   ff  00000000\n"
"..."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:227
msgid ""
"In the case of a ``pseries`` machine, QEMU acts as the hypervisor and only "
"the O/S and USER register rings make sense. ``W2`` contains the vCPU CAM "
"line which is set to the VP identifier."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:231
msgid ""
"Then comes the routing information which aggregates the EAS and the END "
"configuration:"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:236
msgid ""
"...\n"
"LISN         PQ    EISN     CPU/PRIO EQ\n"
"00000000 MSI --    00000010   0/6    380/16384 @1fe3e0000 ^1 "
"[ 80000010 ... ]\n"
"00000001 MSI --    00000010   1/6    305/16384 @1fc230000 ^1 "
"[ 80000010 ... ]\n"
"00000002 MSI --    00000010   2/6    220/16384 @1fc2f0000 ^1 "
"[ 80000010 ... ]\n"
"00000003 MSI --    00000010   3/6    201/16384 @1fc390000 ^1 "
"[ 80000010 ... ]\n"
"00000004 MSI -Q  M 00000000\n"
"00000005 MSI -Q  M 00000000\n"
"00000006 MSI -Q  M 00000000\n"
"00000007 MSI -Q  M 00000000\n"
"00001000 MSI --    00000012   0/6    380/16384 @1fe3e0000 ^1 "
"[ 80000010 ... ]\n"
"00001001 MSI --    00000013   0/6    380/16384 @1fe3e0000 ^1 "
"[ 80000010 ... ]\n"
"00001100 MSI --    00000100   1/6    305/16384 @1fc230000 ^1 "
"[ 80000010 ... ]\n"
"00001101 MSI -Q  M 00000000\n"
"00001200 LSI -Q  M 00000000\n"
"00001201 LSI -Q  M 00000000\n"
"00001202 LSI -Q  M 00000000\n"
"00001203 LSI -Q  M 00000000\n"
"00001300 MSI --    00000102   1/6    305/16384 @1fc230000 ^1 "
"[ 80000010 ... ]\n"
"00001301 MSI --    00000103   2/6    220/16384 @1fc2f0000 ^1 "
"[ 80000010 ... ]\n"
"00001302 MSI --    00000104   3/6    201/16384 @1fc390000 ^1 [ 80000010 ... ]"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:258
msgid "The source information and configuration:"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:260
msgid ""
"The ``LISN`` column outputs the interrupt number of the source in range "
"``[ 0x0 ... 0x1FFF ]`` and its type : ``MSI`` or ``LSI``"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:262
msgid "The ``PQ`` column reflects the state of the PQ bits of the source :"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:264
msgid "``--`` source is ready to take events"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:265
msgid "``P-`` an event was sent and an EOI is PENDING"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:266
msgid "``PQ`` an event was QUEUED"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:267
msgid "``-Q`` source is OFF"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:269
msgid "a ``M`` indicates that source is *MASKED* at the EAS level,"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:271
msgid "The targeting configuration :"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:273
msgid ""
"The ``EISN`` column is the event data that will be queued in the event queue "
"of the O/S."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:275
msgid ""
"The ``CPU/PRIO`` column is the tuple defining the CPU number and priority "
"queue serving the source."
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:277
msgid "The ``EQ`` column outputs :"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:279
msgid "the current index of the event queue/ the max number of entries"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:280
msgid "the O/S event queue address"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:281
msgid "the toggle bit"
msgstr ""

#: ../../../specs/ppc-spapr-xive.rst:282
msgid "the last entries that were pushed in the event queue."
msgstr ""
