# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2025, The QEMU Project Developers
# This file is distributed under the same license as the QEMU package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: QEMU 10\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-10-27 05:37+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../specs/riscv-iommu.rst:4
msgid "RISC-V IOMMU support for RISC-V machines"
msgstr ""

#: ../../../specs/riscv-iommu.rst:6
msgid ""
"QEMU implements a RISC-V IOMMU emulation based on the RISC-V IOMMU spec "
"version 1.0 `iommu1.0.0`_."
msgstr ""

#: ../../../specs/riscv-iommu.rst:9
msgid ""
"The emulation includes a PCI reference device (riscv-iommu-pci) and a "
"platform bus device (riscv-iommu-sys) that QEMU RISC-V boards can use.  The "
"'virt' RISC-V machine is compatible with both devices."
msgstr ""

#: ../../../specs/riscv-iommu.rst:14
msgid "riscv-iommu-pci reference device"
msgstr ""

#: ../../../specs/riscv-iommu.rst:16
msgid ""
"This device implements the RISC-V IOMMU emulation as recommended by the "
"section \"Integrating an IOMMU as a PCIe device\" of `iommu1.0.0`_: a PCI "
"device with base class 08h, sub-class 06h and programming interface 00h."
msgstr ""

#: ../../../specs/riscv-iommu.rst:20
msgid ""
"As a reference device it doesn't implement anything outside of the "
"specification, so it uses a generic default PCI ID given by QEMU: 1b36:0014."
msgstr ""

#: ../../../specs/riscv-iommu.rst:23
msgid "To include the device in the 'virt' machine:"
msgstr ""

#: ../../../specs/riscv-iommu.rst:25
msgid ""
"$ qemu-system-riscv64 -M virt -device riscv-iommu-pci,[optional_pci_opts] "
"(...)"
msgstr ""

#: ../../../specs/riscv-iommu.rst:29
msgid ""
"This will add a RISC-V IOMMU PCI device in the board following any "
"additional PCI parameters (like PCI bus address).  The behavior of the RISC-"
"V IOMMU is defined by the spec but its operation is OS dependent."
msgstr ""

#: ../../../specs/riscv-iommu.rst:33
msgid ""
"As of this writing the existing Linux kernel support `linux-v8`_, not yet "
"merged, does not have support for features like VFIO passthrough.  The IOMMU "
"emulation was tested using a public Ventana Micro Systems kernel repository "
"in `ventana-linux`_.  This kernel is based on `linux-v8`_ with additional "
"patches that enable features like KVM VFIO passthrough with irqbypass.  "
"Until the kernel support is feature complete feel free to use the kernel "
"available in the Ventana Micro Systems mirror."
msgstr ""

#: ../../../specs/riscv-iommu.rst:41
msgid ""
"The current Linux kernel support will use the IOMMU device to create IOMMU "
"groups with any eligible cards available in the system, regardless of "
"factors such as the order in which the devices are added in the command line."
msgstr ""

#: ../../../specs/riscv-iommu.rst:45
msgid ""
"This means that these command lines are equivalent as far as the current "
"IOMMU kernel driver behaves:"
msgstr ""

#: ../../../specs/riscv-iommu.rst:48
msgid ""
"$ qemu-system-riscv64 \\\n"
"      -M virt,aia=aplic-imsic,aia-guests=5 \\\n"
"      -device riscv-iommu-pci,addr=1.0,vendor-id=0x1efd,device-id=0xedf1 \\\n"
"      -device e1000e,netdev=net1 -netdev user,id=net1,net=192.168.0.0/24 \\\n"
"      -device e1000e,netdev=net2 -netdev user,id=net2,net=192.168.200.0/24 "
"\\\n"
"      (...)\n"
"\n"
"$ qemu-system-riscv64 \\\n"
"      -M virt,aia=aplic-imsic,aia-guests=5 \\\n"
"      -device e1000e,netdev=net1 -netdev user,id=net1,net=192.168.0.0/24 \\\n"
"      -device e1000e,netdev=net2 -netdev user,id=net2,net=192.168.200.0/24 "
"\\\n"
"      -device riscv-iommu-pci,addr=1.0,vendor-id=0x1efd,device-id=0xedf1 \\\n"
"      (...)"
msgstr ""

#: ../../../specs/riscv-iommu.rst:64
msgid "Both will create iommu groups for the two e1000e cards."
msgstr ""

#: ../../../specs/riscv-iommu.rst:66
msgid ""
"Another thing to notice on `linux-v8`_ and `ventana-linux`_ is that the "
"kernel driver considers an IOMMU identified as a Rivos device, i.e. it uses "
"Rivos vendor ID.  To use the riscv-iommu-pci device with the existing kernel "
"support we need to emulate a Rivos PCI IOMMU by setting 'vendor-id' and "
"'device-id':"
msgstr ""

#: ../../../specs/riscv-iommu.rst:71
msgid ""
"$ qemu-system-riscv64 -M virt \\\n"
"   -device riscv-iommu-pci,vendor-id=0x1efd,device-id=0xedf1 (...)"
msgstr ""

#: ../../../specs/riscv-iommu.rst:76
msgid ""
"Several options are available to control the capabilities of the device, "
"namely:"
msgstr ""

#: ../../../specs/riscv-iommu.rst:78
msgid "\"bus\": the bus that the IOMMU device uses"
msgstr ""

#: ../../../specs/riscv-iommu.rst:79
msgid "\"ioatc-limit\": size of the Address Translation Cache (default to 2Mb)"
msgstr ""

#: ../../../specs/riscv-iommu.rst:80
msgid "\"intremap\": enable/disable MSI support"
msgstr ""

#: ../../../specs/riscv-iommu.rst:81
msgid "\"ats\": enable ATS support"
msgstr ""

#: ../../../specs/riscv-iommu.rst:82
msgid ""
"\"off\" (Out-of-reset translation mode: 'on' for DMA disabled, 'off' for "
"'BARE' (passthrough))"
msgstr ""

#: ../../../specs/riscv-iommu.rst:83
msgid "\"s-stage\": enable s-stage support"
msgstr ""

#: ../../../specs/riscv-iommu.rst:84
msgid "\"g-stage\": enable g-stage support"
msgstr ""

#: ../../../specs/riscv-iommu.rst:85
msgid ""
"\"hpm-counters\": number of hardware performance counters available. Maximum "
"value is 31. Default value is 31. Use 0 (zero) to disable HPM support"
msgstr ""

#: ../../../specs/riscv-iommu.rst:89
msgid "riscv-iommu-sys device"
msgstr ""

#: ../../../specs/riscv-iommu.rst:91
msgid ""
"This device implements the RISC-V IOMMU emulation as a platform bus device "
"that RISC-V boards can use."
msgstr ""

#: ../../../specs/riscv-iommu.rst:94
msgid ""
"For the 'virt' board the device is disabled by default.  To enable it use "
"the 'iommu-sys' machine option:"
msgstr ""

#: ../../../specs/riscv-iommu.rst:97
msgid "$ qemu-system-riscv64 -M virt,iommu-sys=on (...)"
msgstr ""

#: ../../../specs/riscv-iommu.rst:101
msgid ""
"There is no options to configure the capabilities of this device in the "
"'virt' board using the QEMU command line.  The device is configured with the "
"following riscv-iommu options:"
msgstr ""

#: ../../../specs/riscv-iommu.rst:105
msgid "\"ioatc-limit\": default value (2Mb)"
msgstr ""

#: ../../../specs/riscv-iommu.rst:106
msgid "\"intremap\": enabled"
msgstr ""

#: ../../../specs/riscv-iommu.rst:107
msgid "\"ats\": enabled"
msgstr ""

#: ../../../specs/riscv-iommu.rst:108
msgid "\"off\": on (DMA disabled)"
msgstr ""

#: ../../../specs/riscv-iommu.rst:109
msgid "\"s-stage\": enabled"
msgstr ""

#: ../../../specs/riscv-iommu.rst:110
msgid "\"g-stage\": enabled"
msgstr ""
