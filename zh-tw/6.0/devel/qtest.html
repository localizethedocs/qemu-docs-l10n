<!DOCTYPE html>

<html lang="zh-TW" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>QTest Device Emulation Testing Framework &#8212; QEMU 6.0.1 說明文件</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <script src="../_static/documentation_options.js?v=f15dd5f6"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=cbf116e0"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/qemu-docs-l10n/devel/qtest.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜尋" href="../search.html" />
    <link rel="next" title="Qtest Driver Framework" href="qgraph.html" />
    <link rel="prev" title="QEMU and the stable process" href="stable-process.html" />

   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

<script type="text/javascript" src="../ltd-provenance.js"></script>
<script type="text/javascript" src="../ltd-current.js"></script>
<script type="text/javascript" src="../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../ltd-flyout.js"></script>

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="qtest-device-emulation-testing-framework">
<h1>QTest Device Emulation Testing Framework<a class="headerlink" href="#qtest-device-emulation-testing-framework" title="連結到這個標頭">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>QTest is a device emulation testing framework.  It can be very useful to test
device models; it could also control certain aspects of QEMU (such as virtual
clock stepping), with a special purpose &quot;qtest&quot; protocol.  Refer to
<a class="reference internal" href="#qtest-protocol"><span class="std std-ref">QTest Protocol</span></a> for more details of the protocol.</p>
<p>QTest cases can be executed with</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">check</span><span class="o">-</span><span class="n">qtest</span>
</pre></div>
</div>
<p>The QTest library is implemented by <code class="docutils literal notranslate"><span class="pre">tests/qtest/libqtest.c</span></code> and the API is
defined in <code class="docutils literal notranslate"><span class="pre">tests/qtest/libqtest.h</span></code>.</p>
<p>Consider adding a new QTest case when you are introducing a new virtual
hardware, or extending one if you are adding functionalities to an existing
virtual device.</p>
<p>On top of libqtest, a higher level library, <code class="docutils literal notranslate"><span class="pre">libqos</span></code>, was created to
encapsulate common tasks of device drivers, such as memory management and
communicating with system buses or devices. Many virtual device tests use
libqos instead of directly calling into libqtest.
Libqos also offers the Qgraph API to increase each test coverage and
automate QEMU command line arguments and devices setup.
Refer to <a class="reference internal" href="qgraph.html#qgraph"><span class="std std-ref">Qtest Driver Framework</span></a> for Qgraph explanation and API.</p>
<p>Steps to add a new QTest case are:</p>
<ol class="arabic">
<li><p>Create a new source file for the test. (More than one file can be added as
necessary.) For example, <code class="docutils literal notranslate"><span class="pre">tests/qtest/foo-test.c</span></code>.</p></li>
<li><p>Write the test code with the glib and libqtest/libqos API. See also existing
tests and the library headers for reference.</p></li>
<li><p>Register the new test in <code class="docutils literal notranslate"><span class="pre">tests/qtest/meson.build</span></code>. Add the test
executable name to an appropriate <code class="docutils literal notranslate"><span class="pre">qtests_*</span></code> variable. There is
one variable per architecture, plus <code class="docutils literal notranslate"><span class="pre">qtests_generic</span></code> for tests
that can be run for all architectures.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qtests_generic</span> <span class="o">=</span> <span class="p">[</span>
  <span class="o">...</span>
  <span class="s1">&#39;foo-test&#39;</span><span class="p">,</span>
  <span class="o">...</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>If the test has more than one source file or needs to be linked with any
dependency other than <code class="docutils literal notranslate"><span class="pre">qemuutil</span></code> and <code class="docutils literal notranslate"><span class="pre">qos</span></code>, list them in the <code class="docutils literal notranslate"><span class="pre">qtests</span></code>
dictionary.  For example a test that needs to use the <code class="docutils literal notranslate"><span class="pre">QIO</span></code> library
will have an entry like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="o">...</span>
  <span class="s1">&#39;foo-test&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">io</span><span class="p">],</span>
  <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ol>
<p>Debugging a QTest failure is slightly harder than the unit test because the
tests look up QEMU program names in the environment variables, such as
<code class="docutils literal notranslate"><span class="pre">QTEST_QEMU_BINARY</span></code> and <code class="docutils literal notranslate"><span class="pre">QTEST_QEMU_IMG</span></code>, and also because it is not easy
to attach gdb to the QEMU process spawned from the test. But manual invoking
and using gdb on the test is still simple to do: find out the actual command
from the output of</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">check</span><span class="o">-</span><span class="n">qtest</span> <span class="n">V</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>which you can run manually.</p>
<section id="qtest-protocol">
<span id="id1"></span><h2>QTest Protocol<a class="headerlink" href="#qtest-protocol" title="連結到這個標頭">¶</a></h2>
<p>Line based protocol, request/response based.  Server can send async messages
so clients should always handle many async messages before the response
comes in.</p>
<section id="valid-requests">
<h3>Valid requests<a class="headerlink" href="#valid-requests" title="連結到這個標頭">¶</a></h3>
<section id="clock-management">
<h4>Clock management:<a class="headerlink" href="#clock-management" title="連結到這個標頭">¶</a></h4>
<p>The qtest client is completely in charge of the QEMU_CLOCK_VIRTUAL.  qtest commands
let you adjust the value of the clock (monotonically).  All the commands
return the current value of the clock in nanoseconds.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; clock_step
&lt; OK VALUE
</pre></div>
</div>
<p>Advance the clock to the next deadline.  Useful when waiting for
asynchronous events.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; clock_step NS
&lt; OK VALUE
</pre></div>
</div>
<p>Advance the clock by NS nanoseconds.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; clock_set NS
&lt; OK VALUE
</pre></div>
</div>
<p>Advance the clock to NS nanoseconds (do nothing if it's already past).</p>
</section>
<section id="pio-and-memory-access">
<h4>PIO and memory access:<a class="headerlink" href="#pio-and-memory-access" title="連結到這個標頭">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; outb ADDR VALUE
&lt; OK
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; outw ADDR VALUE
&lt; OK
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; outl ADDR VALUE
&lt; OK
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; inb ADDR
&lt; OK VALUE
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; inw ADDR
&lt; OK VALUE
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; inl ADDR
&lt; OK VALUE
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; writeb ADDR VALUE
&lt; OK
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; writew ADDR VALUE
&lt; OK
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; writel ADDR VALUE
&lt; OK
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; writeq ADDR VALUE
&lt; OK
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; readb ADDR
&lt; OK VALUE
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; readw ADDR
&lt; OK VALUE
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; readl ADDR
&lt; OK VALUE
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; readq ADDR
&lt; OK VALUE
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; read ADDR SIZE
&lt; OK DATA
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; write ADDR SIZE DATA
&lt; OK
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; b64read ADDR SIZE
&lt; OK B64_DATA
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; b64write ADDR SIZE B64_DATA
&lt; OK
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; memset ADDR SIZE VALUE
&lt; OK
</pre></div>
</div>
<p>ADDR, SIZE, VALUE are all integers parsed with strtoul() with a base of 0.
For 'memset' a zero size is permitted and does nothing.</p>
<p>DATA is an arbitrarily long hex number prefixed with '0x'.  If it's smaller
than the expected size, the value will be zero filled at the end of the data
sequence.</p>
<p>B64_DATA is an arbitrarily long base64 encoded string.
If the sizes do not match, the data will be truncated.</p>
</section>
<section id="irq-management">
<h4>IRQ management:<a class="headerlink" href="#irq-management" title="連結到這個標頭">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; irq_intercept_in QOM-PATH
&lt; OK
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; irq_intercept_out QOM-PATH
&lt; OK
</pre></div>
</div>
<p>Attach to the gpio-in (resp. gpio-out) pins exported by the device at
QOM-PATH.  When the pin is triggered, one of the following async messages
will be printed to the qtest stream:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">IRQ</span> <span class="k">raise</span> <span class="n">NUM</span>
<span class="n">IRQ</span> <span class="n">lower</span> <span class="n">NUM</span>
</pre></div>
</div>
<p>where NUM is an IRQ number.  For the PC, interrupts can be intercepted
simply with &quot;irq_intercept_in ioapic&quot; (note that IRQ0 comes out with
NUM=0 even though it is remapped to GSI 2).</p>
</section>
<section id="setting-interrupt-level">
<h4>Setting interrupt level:<a class="headerlink" href="#setting-interrupt-level" title="連結到這個標頭">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; set_irq_in QOM-PATH NAME NUM LEVEL
&lt; OK
</pre></div>
</div>
<p>where NAME is the name of the irq/gpio list, NUM is an IRQ number and
LEVEL is an signed integer IRQ level.</p>
<p>Forcibly set the given interrupt pin to the given level.</p>
</section>
</section>
</section>
<section id="libqtest-api-reference">
<h2>libqtest API reference<a class="headerlink" href="#libqtest-api-reference" title="連結到這個標頭">¶</a></h2>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_initf">
<span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">qtest_initf</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fmt</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_initf" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*fmt</span></code></dt><dd><p>Format for creating other arguments to pass to QEMU, formatted
like sprintf().</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>variable arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Convenience wrapper around qtest_init().</p>
<p><strong>Return</strong></p>
<p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_vinitf">
<span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">qtest_vinitf</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fmt</span></span>, <span class="n"><span class="pre">va_list</span></span><span class="w"> </span><span class="n"><span class="pre">ap</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_vinitf" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*fmt</span></code></dt><dd><p>Format for creating other arguments to pass to QEMU, formatted
like vsprintf().</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">va_list</span> <span class="pre">ap</span></code></dt><dd><p>Format arguments.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Convenience wrapper around qtest_init().</p>
<p><strong>Return</strong></p>
<p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_init">
<span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">qtest_init</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">extra_args</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_init" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*extra_args</span></code></dt><dd><p>other arguments to pass to QEMU.  CAUTION: these
arguments are subject to word splitting and shell evaluation.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_init_without_qmp_handshake">
<span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">qtest_init_without_qmp_handshake</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">extra_args</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_init_without_qmp_handshake" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*extra_args</span></code></dt><dd><p>other arguments to pass to QEMU.  CAUTION: these
arguments are subject to word splitting and shell evaluation.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_init_with_serial">
<span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">qtest_init_with_serial</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">extra_args</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sock_fd</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_init_with_serial" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*extra_args</span></code></dt><dd><p>other arguments to pass to QEMU.  CAUTION: these
arguments are subject to word splitting and shell evaluation.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*sock_fd</span></code></dt><dd><p>pointer to store the socket file descriptor for
connection with serial.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_kill_qemu">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_kill_qemu</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_kill_qemu" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Kill the QEMU process and wait for it to terminate. It is safe to call this
function multiple times. Normally qtest_quit() is used instead because it
also frees QTestState. Use qtest_kill_qemu() when you just want to kill QEMU
and qtest_quit() will be called later.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_quit">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_quit</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_quit" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Shut down the QEMU process associated to <strong>s</strong>.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_qmp_fds">
<span class="n"><span class="pre">QDict</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">qtest_qmp_fds</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fds</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">fds_num</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fmt</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_qmp_fds" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*fds</span></code></dt><dd><p>array of file descriptors</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">fds_num</span></code></dt><dd><p>number of elements in <strong>fds</strong></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*fmt</span></code></dt><dd><p>QMP message to send to qemu, formatted like
qobject_from_jsonf_nofail().  See parse_interpolation() for what's
supported after '%'.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>variable arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Sends a QMP message to QEMU with fds and returns the response.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_qmp">
<span class="n"><span class="pre">QDict</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">qtest_qmp</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fmt</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_qmp" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*fmt</span></code></dt><dd><p>QMP message to send to qemu, formatted like
qobject_from_jsonf_nofail().  See parse_interpolation() for what's
supported after '%'.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>variable arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Sends a QMP message to QEMU and returns the response.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_qmp_send">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_qmp_send</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fmt</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_qmp_send" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*fmt</span></code></dt><dd><p>QMP message to send to qemu, formatted like
qobject_from_jsonf_nofail().  See parse_interpolation() for what's
supported after '%'.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>variable arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Sends a QMP message to QEMU and leaves the response in the stream.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_qmp_send_raw">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_qmp_send_raw</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fmt</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_qmp_send_raw" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*fmt</span></code></dt><dd><p>text to send, formatted like sprintf()</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>variable arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Sends text to the QMP monitor verbatim.  Need not be valid JSON;
this is useful for negative tests.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_socket_server">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_socket_server</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">socket_path</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_socket_server" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*socket_path</span></code></dt><dd><p>the UNIX domain socket path</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Create and return a listen socket file descriptor, or abort on failure.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_vqmp_fds">
<span class="n"><span class="pre">QDict</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">qtest_vqmp_fds</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fds</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">fds_num</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fmt</span></span>, <span class="n"><span class="pre">va_list</span></span><span class="w"> </span><span class="n"><span class="pre">ap</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_vqmp_fds" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*fds</span></code></dt><dd><p>array of file descriptors</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">fds_num</span></code></dt><dd><p>number of elements in <strong>fds</strong></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*fmt</span></code></dt><dd><p>QMP message to send to QEMU, formatted like
qobject_from_jsonf_nofail().  See parse_interpolation() for what's
supported after '%'.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">va_list</span> <span class="pre">ap</span></code></dt><dd><p>QMP message arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Sends a QMP message to QEMU with fds and returns the response.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_vqmp">
<span class="n"><span class="pre">QDict</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">qtest_vqmp</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fmt</span></span>, <span class="n"><span class="pre">va_list</span></span><span class="w"> </span><span class="n"><span class="pre">ap</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_vqmp" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*fmt</span></code></dt><dd><p>QMP message to send to QEMU, formatted like
qobject_from_jsonf_nofail().  See parse_interpolation() for what's
supported after '%'.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">va_list</span> <span class="pre">ap</span></code></dt><dd><p>QMP message arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Sends a QMP message to QEMU and returns the response.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_qmp_vsend_fds">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_qmp_vsend_fds</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fds</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">fds_num</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fmt</span></span>, <span class="n"><span class="pre">va_list</span></span><span class="w"> </span><span class="n"><span class="pre">ap</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_qmp_vsend_fds" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*fds</span></code></dt><dd><p>array of file descriptors</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">fds_num</span></code></dt><dd><p>number of elements in <strong>fds</strong></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*fmt</span></code></dt><dd><p>QMP message to send to QEMU, formatted like
qobject_from_jsonf_nofail().  See parse_interpolation() for what's
supported after '%'.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">va_list</span> <span class="pre">ap</span></code></dt><dd><p>QMP message arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Sends a QMP message to QEMU and leaves the response in the stream.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_qmp_vsend">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_qmp_vsend</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fmt</span></span>, <span class="n"><span class="pre">va_list</span></span><span class="w"> </span><span class="n"><span class="pre">ap</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_qmp_vsend" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*fmt</span></code></dt><dd><p>QMP message to send to QEMU, formatted like
qobject_from_jsonf_nofail().  See parse_interpolation() for what's
supported after '%'.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">va_list</span> <span class="pre">ap</span></code></dt><dd><p>QMP message arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Sends a QMP message to QEMU and leaves the response in the stream.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_qmp_receive_dict">
<span class="n"><span class="pre">QDict</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">qtest_qmp_receive_dict</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_qmp_receive_dict" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reads a QMP message from QEMU and returns the response.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_qmp_receive">
<span class="n"><span class="pre">QDict</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">qtest_qmp_receive</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_qmp_receive" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reads a QMP message from QEMU and returns the response.
Buffers all the events received meanwhile, until a
call to qtest_qmp_eventwait</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_qmp_eventwait">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_qmp_eventwait</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">event</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_qmp_eventwait" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*event</span></code></dt><dd><p>event to wait for.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Continuously polls for QMP responses until it receives the desired event.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_qmp_eventwait_ref">
<span class="n"><span class="pre">QDict</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">qtest_qmp_eventwait_ref</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">event</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_qmp_eventwait_ref" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*event</span></code></dt><dd><p>event to wait for.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Continuously polls for QMP responses until it receives the desired event.
Returns a copy of the event for further investigation.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_qmp_event_ref">
<span class="n"><span class="pre">QDict</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">qtest_qmp_event_ref</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">event</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_qmp_event_ref" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*event</span></code></dt><dd><p>event to return.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Removes non-matching events from the buffer that was set by
qtest_qmp_receive, until an event bearing the given name is found,
and returns it.
If no event matches, clears the buffer and returns NULL.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_hmp">
<span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">qtest_hmp</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fmt</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_hmp" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*fmt</span></code></dt><dd><p>HMP command to send to QEMU, formats arguments like sprintf().</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>variable arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Send HMP command to QEMU via QMP's human-monitor-command.
QMP events are discarded.</p>
<p><strong>Return</strong></p>
<p>the command's output.  The caller should g_free() it.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_vhmp">
<span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">qtest_vhmp</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fmt</span></span>, <span class="n"><span class="pre">va_list</span></span><span class="w"> </span><span class="n"><span class="pre">ap</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_vhmp" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*fmt</span></code></dt><dd><p>HMP command to send to QEMU, formats arguments like vsprintf().</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">va_list</span> <span class="pre">ap</span></code></dt><dd><p>HMP command arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Send HMP command to QEMU via QMP's human-monitor-command.
QMP events are discarded.</p>
<p><strong>Return</strong></p>
<p>the command's output.  The caller should g_free() it.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_get_irq">
<span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_get_irq</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">num</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_get_irq" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">num</span></code></dt><dd><p>Interrupt to observe.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>The level of the <strong>num</strong> interrupt.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_irq_intercept_in">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_irq_intercept_in</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">string</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_irq_intercept_in" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*string</span></code></dt><dd><p>QOM path of a device.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Associate qtest irqs with the GPIO-in pins of the device
whose path is specified by <strong>string</strong>.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_irq_intercept_out">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_irq_intercept_out</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">string</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_irq_intercept_out" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*string</span></code></dt><dd><p>QOM path of a device.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Associate qtest irqs with the GPIO-out pins of the device
whose path is specified by <strong>string</strong>.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_set_irq_in">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_set_irq_in</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">string</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">name</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">irq</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">level</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_set_irq_in" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p>QTestState instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*string</span></code></dt><dd><p>QOM path of a device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*name</span></code></dt><dd><p>IRQ name</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">irq</span></code></dt><dd><p>IRQ number</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">level</span></code></dt><dd><p>IRQ level</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Force given device/irq GPIO-in pin to the given level.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_outb">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_outb</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">value</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_outb" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint16_t</span> <span class="pre">addr</span></code></dt><dd><p>I/O port to write to.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint8_t</span> <span class="pre">value</span></code></dt><dd><p>Value being written.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Write an 8-bit value to an I/O port.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_outw">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_outw</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">value</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_outw" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint16_t</span> <span class="pre">addr</span></code></dt><dd><p>I/O port to write to.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint16_t</span> <span class="pre">value</span></code></dt><dd><p>Value being written.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Write a 16-bit value to an I/O port.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_outl">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_outl</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">value</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_outl" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint16_t</span> <span class="pre">addr</span></code></dt><dd><p>I/O port to write to.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">value</span></code></dt><dd><p>Value being written.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Write a 32-bit value to an I/O port.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_inb">
<span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_inb</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_inb" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint16_t</span> <span class="pre">addr</span></code></dt><dd><p>I/O port to read from.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns an 8-bit value from an I/O port.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_inw">
<span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_inw</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_inw" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint16_t</span> <span class="pre">addr</span></code></dt><dd><p>I/O port to read from.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns a 16-bit value from an I/O port.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_inl">
<span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_inl</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_inl" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint16_t</span> <span class="pre">addr</span></code></dt><dd><p>I/O port to read from.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns a 32-bit value from an I/O port.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_writeb">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_writeb</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">value</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_writeb" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">addr</span></code></dt><dd><p>Guest address to write to.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint8_t</span> <span class="pre">value</span></code></dt><dd><p>Value being written.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Writes an 8-bit value to memory.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_writew">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_writew</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">value</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_writew" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">addr</span></code></dt><dd><p>Guest address to write to.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint16_t</span> <span class="pre">value</span></code></dt><dd><p>Value being written.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Writes a 16-bit value to memory.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_writel">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_writel</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">value</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_writel" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">addr</span></code></dt><dd><p>Guest address to write to.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">value</span></code></dt><dd><p>Value being written.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Writes a 32-bit value to memory.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_writeq">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_writeq</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">value</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_writeq" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">addr</span></code></dt><dd><p>Guest address to write to.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">value</span></code></dt><dd><p>Value being written.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Writes a 64-bit value to memory.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_readb">
<span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_readb</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_readb" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">addr</span></code></dt><dd><p>Guest address to read from.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reads an 8-bit value from memory.</p>
<p><strong>Return</strong></p>
<p>Value read.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_readw">
<span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_readw</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_readw" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">addr</span></code></dt><dd><p>Guest address to read from.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reads a 16-bit value from memory.</p>
<p><strong>Return</strong></p>
<p>Value read.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_readl">
<span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_readl</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_readl" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">addr</span></code></dt><dd><p>Guest address to read from.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reads a 32-bit value from memory.</p>
<p><strong>Return</strong></p>
<p>Value read.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_readq">
<span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_readq</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_readq" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">addr</span></code></dt><dd><p>Guest address to read from.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reads a 64-bit value from memory.</p>
<p><strong>Return</strong></p>
<p>Value read.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_memread">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_memread</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_memread" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">addr</span></code></dt><dd><p>Guest address to read from.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p>Pointer to where memory contents will be stored.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt><dd><p>Number of bytes to read.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Read guest memory into a buffer.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_rtas_call">
<span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_rtas_call</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">name</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">nargs</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">args</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">nret</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">ret</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_rtas_call" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*name</span></code></dt><dd><p>name of the command to call.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">nargs</span></code></dt><dd><p>Number of args.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">args</span></code></dt><dd><p>Guest address to read args from.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">nret</span></code></dt><dd><p>Number of return value.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">ret</span></code></dt><dd><p>Guest address to write return values to.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Call an RTAS function</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_bufread">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_bufread</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_bufread" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">addr</span></code></dt><dd><p>Guest address to read from.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p>Pointer to where memory contents will be stored.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt><dd><p>Number of bytes to read.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Read guest memory into a buffer and receive using a base64 encoding.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_memwrite">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_memwrite</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_memwrite" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">addr</span></code></dt><dd><p>Guest address to write to.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p>Pointer to the bytes that will be written to guest memory.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt><dd><p>Number of bytes to write.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Write a buffer to guest memory.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_bufwrite">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_bufwrite</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_bufwrite" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">addr</span></code></dt><dd><p>Guest address to write to.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p>Pointer to the bytes that will be written to guest memory.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt><dd><p>Number of bytes to write.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Write a buffer to guest memory and transmit using a base64 encoding.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_memset">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_memset</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">patt</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_memset" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">addr</span></code></dt><dd><p>Guest address to write to.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint8_t</span> <span class="pre">patt</span></code></dt><dd><p>Byte pattern to fill the guest memory region with.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt><dd><p>Number of bytes to write.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Write a pattern to guest memory.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_clock_step_next">
<span class="n"><span class="pre">int64_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_clock_step_next</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_clock_step_next" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p><code class="xref c c-type docutils literal notranslate"><span class="pre">QTestState</span></code> instance to operate on.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Advance the QEMU_CLOCK_VIRTUAL to the next deadline.</p>
<p><strong>Return</strong></p>
<p>The current value of the QEMU_CLOCK_VIRTUAL in nanoseconds.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_clock_step">
<span class="n"><span class="pre">int64_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_clock_step</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">int64_t</span></span><span class="w"> </span><span class="n"><span class="pre">step</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_clock_step" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p>QTestState instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int64_t</span> <span class="pre">step</span></code></dt><dd><p>Number of nanoseconds to advance the clock by.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Advance the QEMU_CLOCK_VIRTUAL by <strong>step</strong> nanoseconds.</p>
<p><strong>Return</strong></p>
<p>The current value of the QEMU_CLOCK_VIRTUAL in nanoseconds.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_clock_set">
<span class="n"><span class="pre">int64_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_clock_set</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="n"><span class="pre">int64_t</span></span><span class="w"> </span><span class="n"><span class="pre">val</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_clock_set" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p>QTestState instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int64_t</span> <span class="pre">val</span></code></dt><dd><p>Nanoseconds value to advance the clock to.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Advance the QEMU_CLOCK_VIRTUAL to <strong>val</strong> nanoseconds since the VM was launched.</p>
<p><strong>Return</strong></p>
<p>The current value of the QEMU_CLOCK_VIRTUAL in nanoseconds.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_big_endian">
<span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_big_endian</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_big_endian" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p>QTestState instance to operate on.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>True if the architecture under test has a big endian configuration.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_get_arch">
<span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">qtest_get_arch</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_get_arch" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">void</span></code></dt><dd><p>no arguments</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>The architecture for the QEMU executable under test.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_add_func">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_add_func</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">str</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">)</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_add_func" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*str</span></code></dt><dd><p>Test case path.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">(*fn)(void)</span></code></dt><dd><p>Test case function</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Add a GTester testcase with the given name and function.
The path is prefixed with the architecture under test, as
returned by qtest_get_arch().</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_add_data_func">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_add_data_func</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">str</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">)</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_add_data_func" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*str</span></code></dt><dd><p>Test case path.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p>Test case data</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">(*fn)(const</span> <span class="pre">void</span> <span class="pre">*)</span></code></dt><dd><p>Test case function</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Add a GTester testcase with the given name, data and function.
The path is prefixed with the architecture under test, as
returned by qtest_get_arch().</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_add_data_func_full">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_add_data_func_full</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">str</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">)</span></span>, <span class="n"><span class="pre">GDestroyNotify</span></span><span class="w"> </span><span class="n"><span class="pre">data_free_func</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_add_data_func_full" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*str</span></code></dt><dd><p>Test case path.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p>Test case data</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">(*fn)(const</span> <span class="pre">void</span> <span class="pre">*)</span></code></dt><dd><p>Test case function</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">GDestroyNotify</span> <span class="pre">data_free_func</span></code></dt><dd><p>GDestroyNotify for data</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Add a GTester testcase with the given name, data and function.
The path is prefixed with the architecture under test, as
returned by qtest_get_arch().</p>
<p><strong>data</strong> is passed to <strong>data_free_func()</strong> on test completion.</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.qtest_add">
<span class="sig-name descname"><span class="n"><span class="pre">qtest_add</span></span></span><a class="headerlink" href="#c.qtest_add" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">qtest_add</span> <span class="pre">(testpath,</span> <span class="pre">Fixture,</span> <span class="pre">tdata,</span> <span class="pre">fsetup,</span> <span class="pre">ftest,</span> <span class="pre">fteardown)</span></code></p>
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">testpath</span></code></dt><dd><p>Test case path</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Fixture</span></code></dt><dd><p>Fixture type</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tdata</span></code></dt><dd><p>Test case data</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fsetup</span></code></dt><dd><p>Test case setup function</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ftest</span></code></dt><dd><p>Test case function</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fteardown</span></code></dt><dd><p>Test case teardown function</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Add a GTester testcase with the given name, data and functions.
The path is prefixed with the architecture under test, as
returned by qtest_get_arch().</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_add_abrt_handler">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_add_abrt_handler</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">GHookFunc</span></span><span class="w"> </span><span class="n"><span class="pre">fn</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_add_abrt_handler" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">GHookFunc</span> <span class="pre">fn</span></code></dt><dd><p>Handler function</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p>Argument that is passed to the handler</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Add a handler function that is invoked on SIGABRT. This can be used to
terminate processes and perform other cleanup. The handler can be removed
with qtest_remove_abrt_handler().</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_remove_abrt_handler">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_remove_abrt_handler</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_remove_abrt_handler" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p>Argument previously passed to qtest_add_abrt_handler()</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Remove an abrt handler that was previously added with
qtest_add_abrt_handler().</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_qmp_assert_success">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_qmp_assert_success</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">qts</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fmt</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_qmp_assert_success" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*qts</span></code></dt><dd><p>QTestState instance to operate on</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*fmt</span></code></dt><dd><p>QMP message to send to qemu, formatted like
qobject_from_jsonf_nofail().  See parse_interpolation() for what's
supported after '%'.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>variable arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Sends a QMP message to QEMU and asserts that a 'return' key is present in
the response.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_cb_for_every_machine">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_cb_for_every_machine</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">cb</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">machine</span></span><span class="p"><span class="pre">)</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n"><span class="pre">skip_old_versioned</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_cb_for_every_machine" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">(*cb)(const</span> <span class="pre">char</span> <span class="pre">*machine)</span></code></dt><dd><p>Pointer to the callback function</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">skip_old_versioned</span></code></dt><dd><p>true if versioned old machine types should be skipped</p>
<p>Call a callback function for every name of all available machines.</p>
</dd>
</dl>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_qmp_device_add_qdict">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_qmp_device_add_qdict</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">qts</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">drv</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">QDict</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arguments</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_qmp_device_add_qdict" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*qts</span></code></dt><dd><p>QTestState instance to operate on</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*drv</span></code></dt><dd><p>Name of the device that should be added</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">QDict</span> <span class="pre">*arguments</span></code></dt><dd><p>QDict with properties for the device to intialize</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Generic hot-plugging test via the device_add QMP command with properties
supplied in form of QDict. Use NULL for empty properties list.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_qmp_device_add">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_qmp_device_add</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">qts</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">driver</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">id</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fmt</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_qmp_device_add" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*qts</span></code></dt><dd><p>QTestState instance to operate on</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*driver</span></code></dt><dd><p>Name of the device that should be added</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*id</span></code></dt><dd><p>Identification string</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*fmt</span></code></dt><dd><p>QMP message to send to qemu, formatted like
qobject_from_jsonf_nofail().  See parse_interpolation() for what's
supported after '%'.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>variable arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Generic hot-plugging test via the device_add QMP command.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_qmp_device_del">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_qmp_device_del</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">qts</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">id</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_qmp_device_del" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*qts</span></code></dt><dd><p>QTestState instance to operate on</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*id</span></code></dt><dd><p>Identification string</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Generic hot-unplugging test via the device_del QMP command.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qmp_rsp_is_err">
<span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qmp_rsp_is_err</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QDict</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rsp</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qmp_rsp_is_err" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QDict</span> <span class="pre">*rsp</span></code></dt><dd><p>QMP response to check for error</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Test <strong>rsp</strong> for error and discard <strong>rsp</strong>.
Returns 'true' if there is error in <strong>rsp</strong> and 'false' otherwise.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qmp_expect_error_and_unref">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qmp_expect_error_and_unref</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QDict</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rsp</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">class</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qmp_expect_error_and_unref" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QDict</span> <span class="pre">*rsp</span></code></dt><dd><p>QMP response to check for error</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*class</span></code></dt><dd><p>an error class</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Assert the response has the given error class and discard <strong>rsp</strong>.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_probe_child">
<span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_probe_child</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_probe_child" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p>QTestState instance to operate on.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>true if the child is still alive.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.qtest_set_expected_status">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">qtest_set_expected_status</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">QTestState</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">s</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">status</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.qtest_set_expected_status" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">QTestState</span> <span class="pre">*s</span></code></dt><dd><p>QTestState instance to operate on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">status</span></code></dt><dd><p>an expected exit status.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Set expected exit status of the child.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">QEMU</a></h1>








<div id="editpage">
  <ul>
    <li><a href="https://gitlab.com/qemu-project/qemu/-/blob/master/docs/devel/qtest.rst">Page source</a></li>
  </ul>
</div><h3>瀏覽</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../system/index.html">System Emulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Mode Emulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interop/index.html">System Emulation Management and Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../specs/index.html">System Emulation Guest Hardware Specifications</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Information</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="code-of-conduct.html">Code of Conduct</a></li>
<li class="toctree-l2"><a class="reference internal" href="conflict-resolution.html">Conflict Resolution Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="build-system.html">The QEMU build system architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="style.html">QEMU Coding Style</a></li>
<li class="toctree-l2"><a class="reference internal" href="kconfig.html">QEMU and Kconfig</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing in QEMU</a></li>
<li class="toctree-l2"><a class="reference internal" href="fuzzing.html">Fuzzing</a></li>
<li class="toctree-l2"><a class="reference internal" href="control-flow-integrity.html">Control-Flow Integrity (CFI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="loads-stores.html">Load and Store APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory.html">The memory API</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration.html">Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="atomics.html">Atomic operations in QEMU</a></li>
<li class="toctree-l2"><a class="reference internal" href="stable-process.html">QEMU and the stable process</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">QTest Device Emulation Testing Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="decodetree.html">Decodetree Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="secure-coding-practices.html">Secure Coding Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="tcg.html">Translator Internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="tcg-icount.html">TCG Instruction Counting</a></li>
<li class="toctree-l2"><a class="reference internal" href="tracing.html">Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi-thread-tcg.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi-thread-tcg.html#vcpu-scheduling">vCPU Scheduling</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi-thread-tcg.html#shared-data-structures">Shared Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi-thread-tcg.html#memory-consistency">Memory Consistency</a></li>
<li class="toctree-l2"><a class="reference internal" href="tcg-plugins.html">QEMU TCG Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="bitops.html">Bitwise operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="reset.html">Reset in QEMU: the Resettable interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="s390-dasd-ipl.html">Booting from real channel-attached devices on s390x</a></li>
<li class="toctree-l2"><a class="reference internal" href="clocks.html">Modelling a clock tree in QEMU</a></li>
<li class="toctree-l2"><a class="reference internal" href="qom.html">The QEMU Object Model (QOM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="block-coroutine-wrapper.html">block-coroutine-wrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi-process.html">Multi-process QEMU</a></li>
</ul>
</li>
</ul>


<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜尋</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="前往" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2020, The QEMU Project Developers.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.2</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
    </div>

    

    
  </body>
</html>